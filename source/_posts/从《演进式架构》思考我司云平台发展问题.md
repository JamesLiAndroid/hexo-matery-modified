---
title: 从《演进式架构》思考我司云平台发展问题
top: false
cover: false
toc: true
mathjax: true
date: 2020-11-20 14:41:51
password:
summary:
tags:
categories:
---

# 从《演进式架构》思考我司云平台发展问题

第一，肯定我们走微服务架构的路子，为了应对变化，分割为细小单元是正确的。但是，最大的问题在于组织机构建设不到位，人员培养不到位，逆康威定律影响的具体体现！

第二，支持微服务的方式，应该崇尚快速灵活、减少耦合，以领域驱动为核心进行服务构建。初期未能很好的做到这一点！

第三，肯定我们自身的演进能力，说明团队目前战斗力不弱。但是针对相悖的两个方向，例如SaaS模式和私有化部署，我们无法完全同时支持！而业务上需求量较少的情况下，还是使用当前微服务的一套进行支持，不符合客户的使用场景，造成资源浪费的情况。

总结一：架构是演进而来的，在不同时期支持不同的应用场景，并向前考虑一到两个阶段。针对私有化部署的，对于量不大的完全可以以单体模式进行部署，对于特殊需求的大客户，考虑使用微服务模式进行部署。

第四，在架构维度上，思考不足。可审计性、数据、安全、性能、合法性、伸缩性，这几点我们都略有涉及，却都没有很好的做到，需要我们认真反思。

第五，适应度函数，也就是对于各个架构维度的约束和衡量标准，目前我们没有明确的衡量标准，也没有明确的共识性质的约定。这个是做的不足的地方！

第六，对于自动化部分我们仅仅做到了DevOps流水线的构建，但是单元测试自动化的缺失、集成测试自动化的缺失，部署正式环境时未进行人工干预的审计。细节的缺失比较严重。

总结二：自动化是主流，应该构建从需求管理、变更提交、构建关联、自动测试、集成运行、人工合并、正式环境逐步替换的一条研发部署管理系统！

第七，当某个开发阶段完成时，要做好抛弃该阶段架构的准备。事实上我们已经这么做了！

第八，识别何处可变，坚持走决策可逆的道路，向既定方向前进并勇敢解决问题，构建错误隔离层（防腐层），构建可牺牲架构，应对外部开源依赖的变化（例如AntDesign万圣节事件），库与框架的按需更新，走持续交付的道路，服务内版本化并维持少数几个服务，最后以服务模板的方式集成公共代码或者功能业务的调用！

第九，控制权始终在我，以我为主。选择较为稳健的技术路线，始终以官方文档作为第一指导！

第十，一步迈出去，就不要回头看，不要去犹豫，而是向前走，遇山开山，遇水架桥。确定目标，就要在一定时间节点内坚持下去，在这个时间段内不允许动摇！

第十一，无论是需求还是技术路线，除前沿领域研究，严禁冒进行为，引入未经社区认证的第三方库需要严格审查代码！

第十二，团队建设，一职多能化，先注重T型人才的培养，才能谈Π型人才！

总结三：组织上到位，需求上合理，目标坚定，团队严肃活泼积极。以人为本！


# 未来开源方面的内容

1. 企业级网盘

- 权限、组织、人员、菜单
- 工作流审批
- 文件历史
- 文件树、文件夹结构和关系
- 文件访问权限
- 规则引擎

2. 研发管理

- DevOps
- 项目管理、关联gitlab或者分支提交，关联构建功能链条
- 最终部署运维层面、服务编排、监控
- 微服务化