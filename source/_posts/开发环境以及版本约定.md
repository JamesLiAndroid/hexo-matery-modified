---
title: 开发环境以及版本约定
top: false
cover: false
toc: true
mathjax: true
date: 2019-09-01 17:13:32
password:
summary:
tags: Java SpringCloud 微服务
categories: Java
---

# 开发环境以及版本约定

## 1. 日常开发

1.1 环境：java8还是更高版本？jdk1.8的商用限制？

1.2 IDE：Intellij Idea还是Eclipse，版本用最新吗？

1.3 构建工具：maven还是gradle？用maven3以上版本？gradle是否用最新？

1.4 私有仓库建设，接上用maven如何搭建nexus私服？同步策略？

1.5 应用容器：日常测试用jetty？war包用Tomcat？Tomcat8版本？jetty版本？

1.6 数据库：PostgreSQL还是MySQL？各自版本？MySQL是5.7还是8？集群搭建方案？读写分离？后端数据库框架的变更？

1.7 前端：npm版本？nodejs版本？Vue版本？React版本？EcmaScript用2016版本？是否需要使用框架，例如ElementUI或者是AntDesign这样的？前端的发布和管理？前后端交互方式，是HTTP还是其它？原型设计和易用性交互？前端工程化？依赖管理/包管理？（前端单独整理）

1.8 浏览器兼容：IE 6、7、8问题？Chrome版本问题？FireFox版本问题？

1.9 后端开发（每一项都需要列举具体框架版本）

    前提：SpringBoot具体版本？Spring Cloud具体版本？

    1.9.1 服务注册和发现
    
    Eureka还是Dubbo？zookeeper、etcd还是consul？Nacos？

    服务发现：客户端发现还是服务端发现？
    
    服务注册：自注册还是第三方注册方式？

    1.9.2 网关
    
    Zuul还是Nginx Plus？选择Spring Cloud Gateway？Linkerd还是Envoy,还有UnderTow？

    1.9.3 服务调用

    RestTemplate还是FeignClient?Ribbon和Feign的对比与选择？

    1.9.5 服务限流

    RateLimiter还是使用sentinel？限流算法选择？是固定、滑动时间窗口限流还是令牌桶、漏桶限流？

    1.9.6 服务熔断

    Hystrix（Turbine收集Hystrix指标）

    1.9.7 配置管理

    Spring Cloud Config还是Apollo还是Nacos？

    1.9.8 链路跟踪

    Skywalking还是Spring Cloud Sleuth+Zipkin？是否考虑Pinpoint？

    1.9.9 消息队列

    ActiveMQ，RabbitMQ，RocketMQ，还是kafka？

    1.9.10 缓存及其配置

    分布式缓存？使用Redis sentinel搭建还是使用微博的CacheService？DCache？

    1.9.11 日志监控

    ELK+Kibana+Logstash？EFKA（elasticsearch fluentd kibana kafka）体系？是否需要Turbine收集Hystrix指标?

    日志的存储策略，包括级别、提取的有效信息、存储时间、备份策略等。
    
    TICK体系（https://blog.csdn.net/lin_credible/article/details/60579738）
    
    日志审计策略
    
    1.9.12 权限管理
    
    用户权限：
    基于RBAC、JWT、OAuth2的无状态权限管理体系
   
    文档权限：
    用户访问控制，区域控制，
    
    权限继承->模型继承
    

1.10 数据库解决方案

    1.10.1 数据库分库分表方案

    Sharding横向扩展、ScaleOut/ScaleUp（垂直切分/水平拆分）、分表分区、分表分库？分布式事务问题？

    拆分维度、事务问题、跨库跨表join，额外的数据管理负担、多库结果集合并？是否考虑atomikos+jta解决分布式事务问题？

    框架权衡：基于代理方式的有MySQL Proxy和Amoeba， 基于Hibernate框架的是Hibernate Shards，基于jdbc的有当当sharding-jdbc， 基于mybatis的类似maven插件式的有蘑菇街的蘑菇街TSharding，其它例如MySQL Fabric、TDDL（阿里）、Cobar（阿里）、Altas（269）、Heisenberg（百度）、Vitess（youtube）。

    1.10.2 数据库读写分离方案

    主从复制，一写多读？Master故障后的选举策略？读库和写库的同步策略？

    微服务缓存架构是否跟适合支撑大数据量、高并发、高可用要求（见1.11缓存部分问题）？

    如果面临大量写数据的问题，例如大BOM的写入，又该如何权衡？引擎选择 MyISAM vs InnoDB？

    框架权衡：Maxsacle + KeepAlived lvs？

    1.10.3 数据库高可用方案

    同城双活、异地容灾、两地三中心策略？

    数据同步机制？数据恢复机制？
    
    1.10.4 数据库中间件
    
    MyCat？其它选择？
    
    1.10.5 文件数据库/非关系型数据库
    
    

1.11 缓存策略与缓存集群

    1.11.1 缓存框架

    分布式缓存Redis、Memcache？程序侧Ehcache、Guava Cache？

    1.11.2 缓存策略

    什么内容入缓存？过期策略？脏数据处理？是否固化？

    更新缓存的策略：Cache aside、 Read through、 Write through、 Write behind caching，用哪一种？

    与数据库的协同？

    1.11.3 缓存集群

    Cluster模式还是哨兵模式？单机多应用伪集群（测试）模式还是多机集群（生产）部署模式？集群内的同步策略？

1.12 文件服务

    1.12.1 文件集群

    小文件存储和大文件存储是否分离？

    几个FS的权衡和选择：GFS、HDFS、Ceph、Lustre、MogileFS、mooseFS、FastDFS、TFS、GridFS

    1.12.2 OSS安全性-文件验证、可执行代码问题

    文件访问
    控制，禁止文件存储位置的可执行权限，验证文件格式信息？
    
    1.12.3 大文件存储和传输
    
    1.12.4 
    
1.15 搜索引擎

    数据检索、结果缓存、分词存储、
    
1.16 多语言支持

1.17 任务调度中心

1.13 访问

    1.13.1 负载均衡

    Nginx/OpenResty + Keepalived？网关侧控制？内部接口调用的负载均衡？

    1.13.2 边缘加速

    CDN服务、DNS服务？
    
    1.13.3 分布式部署

1.14 自动化

自动构建和测试用例，测试用例覆盖度？

git + gitlab + jenkins + sonar自动构建和单元测试平台。

1.14 开发时，操作系统选择：开发层面统一使用Win10还是Win7？是否允许其它操作系统？

## 2. 线上部署和运维

2.1 服务器选择及其配置

CentOS7？具体版本确定？大致的服务器数量、配置、功能分配、位置选择？私有镜像制作，针对不同使用场景加入我们自身的安全策略！

2.2 容器化

选择docker还是选择其它容器？是Kubernetes还是Mosos+marathon？具体版本？

2.3 服务器实例/集群管理

（暂时未想好）

2.4 监控平台

Zabbix+Grafana？Kibana？日志展示？全链路监控展示？

如何将展示信息具象化、简洁化？

2.5 异常告警

告警方式？邮件、企业微信、钉钉？

紧急响应的人员如何安排？针对紧急上线的修改如何管理？

2.6 平台安全性

SQL注入？跨站攻击？渗透测试？

## 3. 日常培训策略

3.1 规约与制度

编码规范、SQL规范或者最佳实践、CodeReview

议事制度、协作方式、冲突裁定

3.2 开发方式

有限开放？封闭？

3.3 安全

HTTPS TLS2.1，接口数据加密与解密

3.4 最佳实践

设计模式、重构

3.5 研发管理

bug管理、功能日常进度、测试情况 -- 禅道？Coplan？

## 4. 具体业务落地

4.1 用户中心

多租户服务能力、权限控制、单点登录--RBAC、JWT、OAuth2的无状态权限管理体系

4.2 BOM系统

4.3 工作流

4.4 图文档管理

Activiti、JBoss JBPM 6.5、JFlow 6.0（国产）、FixFlow 5.0

4.5 自定义表单

4.6 BI数据统计（非重点）

